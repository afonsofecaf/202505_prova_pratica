<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Prova PrÃ¡tica â€“ Procedure e Trigger no Supabase (VersÃ£o AvanÃ§ada)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container my-5">

  <h1 class="text-primary">Link de Acesso: <a href="https://afonsofecaf.github.io/202505_prova_pratica" target="_blank">https://afonsofecaf.github.io/202505_prova_pratica</a></h1>

  <h1 class="text-primary">ğŸ§ª Prova PrÃ¡tica â€“ Procedure e Trigger no Supabase (VersÃ£o AvanÃ§ada)</h1>

  <h2 class="text-secondary mt-4">ğŸ“Œ SituaÃ§Ã£o:</h2>
  <p>
    VocÃª foi contratado para modelar parte do sistema de gestÃ£o de uma instituiÃ§Ã£o de ensino. Seu desafio serÃ¡ criar trÃªs tabelas interligadas e configurar a lÃ³gica de negÃ³cio de forma automatizada com o uso de <strong>function</strong> e <strong>trigger</strong>.
  </p>

  <h2 class="text-secondary mt-4">ğŸ¯ Objetivo:</h2>
  <p>
    Sempre que um novo aluno for matriculado em um curso, o sistema deverÃ¡:
  </p>
  <ul>
    <li>Registrar a matrÃ­cula em uma tabela intermediÃ¡ria.</li>
    <li>Gerar automaticamente um <strong>log</strong> dessa matrÃ­cula.</li>
    <li>Atualizar a quantidade total de alunos matriculados no respectivo curso.</li>
  </ul>

  <h2 class="text-secondary mt-4">ğŸ“ Estrutura de dados obrigatÃ³ria:</h2>
  <p>VocÃª deverÃ¡ criar e utilizar as seguintes tabelas:</p>

  <ul>
    <li><strong>aluno</strong>: deve conter pelo menos os campos <code>id</code>, <code>nome</code> e <code>email</code>.</li>
    <li><strong>curso</strong>: deve conter pelo menos os campos <code>id</code>, <code>nome</code> e <code>qtd_matriculados</code>.</li>
    <li><strong>matricula</strong>: deve conter pelo menos os campos <code>id</code>, <code>aluno_id</code> e <code>curso_id</code>.</li>
    <li><strong>logs_matricula</strong>: deve conter pelo menos os campos <code>id</code>, <code>aluno_id</code>, <code>curso_id</code> e <code>data_matricula</code>.</li>
  </ul>

  <h2 class="text-secondary mt-4">âœ… O que deve ser entregue:</h2>
  <ol>
    <li>CriaÃ§Ã£o das quatro tabelas acima.</li>
    <li>CriaÃ§Ã£o de uma <strong>function</strong> ou <strong>procedure</strong> que:
      <ul>
        <li>Adicione um registro na tabela de <code>logs_matricula</code> automaticamente ao ocorrer uma nova matrÃ­cula.</li>
        <li>Atualize o campo <code>qtd_matriculados</code> na tabela <code>curso</code>, somando 1 a cada nova matrÃ­cula.</li>
      </ul>
    </li>
    <li>CriaÃ§Ã£o de uma <strong>trigger</strong> que acione essa function apÃ³s a inserÃ§Ã£o na tabela <code>matricula</code>.</li>
    <li>Comandos de inserÃ§Ã£o para simular a matrÃ­cula de pelo menos um aluno em um curso.</li>
  </ol>

  <h2 class="text-secondary mt-4">ğŸ“ Regras obrigatÃ³rias:</h2>
  <ul>
    <li>A trigger deve ser configurada para ser executada <strong>automaticamente apÃ³s o INSERT</strong> na tabela de matrÃ­cula.</li>
    <li>A function deve conter as duas operaÃ§Ãµes exigidas: geraÃ§Ã£o do log + atualizaÃ§Ã£o da contagem de alunos.</li>
    <li>Os comandos devem ser organizados em um Ãºnico arquivo executÃ¡vel.</li>
    <li>O sistema nÃ£o deve permitir alteraÃ§Ãµes manuais na contagem de alunos â€” ela deve depender exclusivamente da trigger.</li>
  </ul>

  <h2 class="text-secondary mt-4">ğŸ“¦ Entrega:</h2>
  <p>Entregue um Ãºnico arquivo chamado <strong>prova_trigger_avancada.sql</strong> contendo:</p>
  <ul>
    <li>A criaÃ§Ã£o de todas as tabelas e seus relacionamentos.</li>
    <li>A definiÃ§Ã£o da funÃ§Ã£o ou procedure responsÃ¡vel pela lÃ³gica automatizada.</li>
    <li>A criaÃ§Ã£o da trigger associada.</li>
    <li>Os comandos de inserÃ§Ã£o para simulaÃ§Ã£o e teste.</li>
  </ul>

  <p class="mb-0">Esse arquivo serÃ¡ executado diretamente no Supabase. Certifique-se de que todos os comandos estejam na ordem correta e sem necessidade de ajustes manuais.</p>

</body>
</html>
